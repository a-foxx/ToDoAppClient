{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from\"react\";import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=function Auth(){var _useCookies=useCookies(['email','token']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isLogIn=_useState10[0],setIsLogIn=_useState10[1];// console.log(email, password, confirmPassword)\n// console.log('cookies:', cookies)\nvar viewLogin=function viewLogin(status){setError(null);setIsLogIn(status);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,endpoint){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!isLogIn&&password!==confirmPassword)){_context.next=4;break;}setError('Make sure passwords match!');return _context.abrupt(\"return\");case 4:_context.prev=4;_context.next=7;return fetch(\"\".concat(process.env.REACT_APP_SERVERURL,\"/\").concat(endpoint),{method:'POST',headers:{'Content-type':'application/json'},// credentials: 'include',\nbody:JSON.stringify({email:email,password:password})});case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;console.log('data ',data.message);if(data.message){setError(data.message);}else{if(data.email&&data.token){console.log(data.email);setCookie('Email',data.email);setCookie('AuthToken',data.token);}}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](4);console.error(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[4,15]]);}));return function handleSubmit(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container-box\",children:[/*#__PURE__*/_jsxs(\"form\",{title:\"login\",children:[/*#__PURE__*/_jsx(\"h2\",{title:\"header\",children:isLogIn?'Please log in':'Please sign up'}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",name:\"emailInput\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),!isLogIn&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"confirm password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"create\",\"data-testid\":\"submit\",value:isLogIn?'Log in':'Sign up',onClick:function onClick(e){return handleSubmit(e,isLogIn?'auth/login':'auth/signup');}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"error-container\",children:error&&/*#__PURE__*/_jsx(\"p\",{className:\"display-auth-error\",\"data-testid\":\"error\",children:error})}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-options\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return viewLogin(false);},style:{backgroundColor:!isLogIn?'rgb(255, 255, 255)':'rgb(188, 188, 188)'},children:\"Sign up\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return viewLogin(true);},style:{backgroundColor:!isLogIn?'rgb(255, 255, 255)':'rgb(188, 188, 188)'},children:\"Log in\"})]})]})});};export default Auth;","map":{"version":3,"names":["React","useState","useCookies","Auth","cookies","setCookie","removeCookie","error","setError","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","isLogIn","setIsLogIn","viewLogin","status","handleSubmit","e","endpoint","preventDefault","fetch","process","env","REACT_APP_SERVERURL","method","headers","body","JSON","stringify","response","json","data","console","log","message","token","target","value","backgroundColor"],"sources":["C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/src/components/Auth.js"],"sourcesContent":["import React from 'react'\r\nimport { useState } from \"react\";\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst Auth = () => {\r\n  const [cookies, setCookie, removeCookie] = useCookies(['email', 'token'])\r\n  const [error, setError] = useState(null)\r\n  const [email, setEmail] = useState(null)\r\n  const [password, setPassword] = useState(null)\r\n  const [confirmPassword, setConfirmPassword] = useState(null)\r\n  const [isLogIn, setIsLogIn] = useState(true)\r\n\r\n  // console.log(email, password, confirmPassword)\r\n  // console.log('cookies:', cookies)\r\n\r\n  const viewLogin = (status) => {\r\n    setError(null)\r\n    setIsLogIn(status)\r\n  }\r\n\r\n  const handleSubmit = async (e, endpoint) => {\r\n    e.preventDefault()\r\n    if (!isLogIn && password !== confirmPassword) {\r\n      setError('Make sure passwords match!')\r\n      return\r\n    }\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_SERVERURL}/${endpoint}`, {\r\n        method: 'POST',\r\n        headers: {'Content-type': 'application/json'},\r\n        // credentials: 'include',\r\n        body: JSON.stringify({email, password})\r\n      })\r\n      const data = await response.json()\r\n      console.log('data ', data.message)\r\n      if (data.message) {\r\n        setError(data.message)\r\n      } else {\r\n        if (data.email && data.token) {\r\n          console.log(data.email)\r\n          setCookie('Email', data.email)\r\n          setCookie('AuthToken', data.token)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n    return (\r\n      <div className=\"auth-container\">\r\n        <div className=\"auth-container-box\">\r\n          <form title='login'>\r\n            <h2 title='header' >{isLogIn ? 'Please log in' : 'Please sign up'}</h2>\r\n            <input \r\n            type=\"email\" \r\n            placeholder=\"email\" \r\n            name='emailInput'\r\n            onChange={(e) => setEmail(e.target.value)} \r\n            />\r\n            <input \r\n            type=\"password\" \r\n            placeholder=\"password\" \r\n            onChange={(e) => setPassword(e.target.value)}\r\n            /> \r\n            {!isLogIn && <input \r\n            type=\"password\" \r\n            placeholder=\"confirm password\" \r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n            />}\r\n            <input \r\n            type=\"submit\" \r\n            className=\"create\"\r\n            data-testid=\"submit\" \r\n            value={isLogIn ? 'Log in' : 'Sign up'} \r\n            onClick={(e) => handleSubmit(e, isLogIn ? 'auth/login' : 'auth/signup')} \r\n            />\r\n          </form>\r\n          <div className=\"error-container\">\r\n            {error && \r\n            <p className=\"display-auth-error\" data-testid=\"error\">\r\n              {error}  \r\n            </p>}\r\n          </div>\r\n          <div className=\"auth-options\">\r\n            <button \r\n            onClick={() => viewLogin(false)}\r\n            style={{backgroundColor : !isLogIn ? 'rgb(255, 255, 255)' : 'rgb(188, 188, 188)'}}\r\n            >Sign up</button>\r\n            <button \r\n            onClick={() => viewLogin(true)}\r\n            style={{backgroundColor : !isLogIn ? 'rgb(255, 255, 255)' : 'rgb(188, 188, 188)'}}\r\n            >Log in</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default Auth;\r\n  \r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}