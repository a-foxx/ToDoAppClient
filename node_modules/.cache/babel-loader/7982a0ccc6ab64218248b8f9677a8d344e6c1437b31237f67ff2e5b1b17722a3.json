{"ast":null,"code":"import _defineProperty from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from\"react\";import{useCookies}from'react-cookie';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Model=function Model(_ref){var mode=_ref.mode,setShowModal=_ref.setShowModal,getData=_ref.getData,task=_ref.task;var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var editMode=mode==='edit'?true:false;var _useState3=useState({user_email:editMode?task.user_email:cookies.Email,title:editMode?task.title:\"\",progress:editMode?task.progress:50,date:editMode?task.date:new Date()}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var postData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,responseJSON;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return fetch(\"\".concat(process.env.REACT_APP_SERVERURL,\"/to-do/todos\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});case 4:response=_context.sent;_context.next=7;return response.json();case 7:responseJSON=_context.sent;if(response.ok){setShowModal(false);getData();}else{console.log(responseJSON);setError(responseJSON.message);}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function postData(_x){return _ref2.apply(this,arguments);};}();var editData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response,responseJSON;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return fetch(\"\".concat(process.env.REACT_APP_SERVERURL,\"/to-do/todos/\").concat(task.id),{method:'PUT',headers:{'content-type':'application/json'},body:JSON.stringify(data)});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:responseJSON=_context2.sent;if(response.ok){setShowModal(false);getData();}else{console.log(responseJSON.message);setError(responseJSON.message);}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[1,11]]);}));return function editData(_x2){return _ref3.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};return/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-title-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Lets \",mode,\" your task\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setShowModal(false);},children:\"X\"})]}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{required:true,maxLength:30,placeholder:\" Your task goes here\",name:\"title\",value:data.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"range\",min:\"0\",max:\"100\",name:\"progress\",value:data.progress,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:mode,type:\"submit\",onClick:editMode?editData:postData})]}),/*#__PURE__*/_jsx(\"div\",{className:\"error-container\",children:error&&/*#__PURE__*/_jsx(\"p\",{className:\"display-auth-error\",children:error})})]})});};export default Model;","map":{"version":3,"names":["React","useState","useCookies","Model","mode","setShowModal","getData","task","cookies","setCookie","removeCookie","error","setError","editMode","user_email","Email","title","progress","date","Date","data","setData","postData","e","preventDefault","fetch","process","env","REACT_APP_SERVERURL","method","headers","body","JSON","stringify","response","json","responseJSON","ok","console","log","message","editData","id","handleChange","target","name","value"],"sources":["C:/Users/Alan/Documents/Itcareerswitch/codecademy/projects/to-do-app/client/src/components/Modal.js"],"sourcesContent":["import React from 'react'\r\nimport { useState } from \"react\"\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst Model = ({ mode, setShowModal, getData, task }) => {\r\n  const [cookies, setCookie, removeCookie] = useCookies(null)\r\n  const [error, setError] = useState(null)\r\n  const editMode = mode === 'edit' ? true : false\r\n\r\n  const [data, setData] = useState({\r\n    user_email: editMode ? task.user_email : cookies.Email,\r\n    title: editMode ? task.title : \"\",\r\n    progress: editMode ? task.progress : 50,\r\n    date: editMode ? task.date : new Date()\r\n  })\r\n\r\n  const postData = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_SERVERURL}/to-do/todos`, {\r\n        method: \"POST\",\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify(data)\r\n      })\r\n      const responseJSON = await response.json()\r\n        if (response.ok) {\r\n          setShowModal(false)\r\n          getData()\r\n        } else {\r\n          console.log(responseJSON)\r\n          setError(responseJSON.message)\r\n        }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  const editData = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_SERVERURL}/to-do/todos/${task.id}`, {\r\n        method: 'PUT',\r\n        headers: {'content-type': 'application/json'},\r\n        body: JSON.stringify(data)\r\n      })\r\n      const responseJSON = await response.json()\r\n      if (response.ok) {\r\n        setShowModal(false)\r\n        getData()\r\n      } else {\r\n        console.log(responseJSON.message)\r\n        setError(responseJSON.message)\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target;\r\n    setData(data => ({\r\n      ...data, \r\n      [name] : value\r\n    }))\r\n  }\r\n\r\n    return (\r\n      <div className=\"overlay\">\r\n        <div className=\"modal\">\r\n          <div className=\"form-title-container\">\r\n            <h3>Lets {mode} your task</h3>\r\n            <button onClick={() => setShowModal(false)}>X</button>\r\n          </div>\r\n          <form>\r\n            <input \r\n            required \r\n            maxLength={30} \r\n            placeholder=\" Your task goes here\"\r\n            name=\"title\"\r\n            value={data.title}\r\n            onChange={handleChange}\r\n            />\r\n            <br/>\r\n            <input\r\n            required\r\n            type=\"range\"\r\n            min='0'\r\n            max='100'\r\n            name=\"progress\"\r\n            value={data.progress}\r\n            onChange={handleChange}\r\n            />\r\n            <input className={mode} type=\"submit\" onClick={editMode ? editData : postData}\r\n            />\r\n          </form>\r\n          <div className=\"error-container\">\r\n            {error && \r\n            <p className=\"display-auth-error\">\r\n              {error}  \r\n            </p>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default Model;\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}